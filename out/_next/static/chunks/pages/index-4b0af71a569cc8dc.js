(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(7246)}])},7993:function(e,s,a){"use strict";a.d(s,{Z:function(){return r}});var t=a(5893),i=a(7294);function r(){let[e,s]=(0,i.useState)([{name:"SENSEX",value:0,change:0,changePercent:0,isStale:!0},{name:"NIFTY 50",value:0,change:0,changePercent:0,isStale:!0}]),[a,r]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/indicesData");if(!e.ok)throw Error("Failed to fetch indices: ".concat(e.status));let a=await e.json();if(!a||!Array.isArray(a)||a.length<2)throw Error("Invalid indices data format");s([{name:"SENSEX",value:a[0].value||0,change:a[0].change||0,changePercent:a[0].changePercent||0,lastUpdate:new Date().toISOString(),isStale:!1},{name:"NIFTY 50",value:a[1].value||0,change:a[1].change||0,changePercent:a[1].changePercent||0,lastUpdate:new Date().toISOString(),isStale:!1}]),r(!1)}catch(e){console.error("Error fetching indices data:",e),r(!0),s(e=>e.map(e=>({...e,isStale:!0,lastUpdate:new Date().toISOString()})))}};e();let a=setInterval(e,3e5);return()=>clearInterval(a)},[]);let n=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2,style:"decimal",useGrouping:!0}).format(Math.abs(e));return(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.map(e=>(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-xs text-white/50",children:e.name}),e.isStale&&(0,t.jsx)("div",{className:"text-[10px] text-white/30",children:"Stale"})]}),(0,t.jsx)("div",{className:"mt-1 text-base",children:n(e.value)}),(0,t.jsxs)("div",{className:"mt-0.5 text-xs ".concat(e.change>=0?"text-green-500":"text-red-500"),children:[e.change>=0?"+":"",n(e.change)," (",e.changePercent.toFixed(2),"%)"]})]},e.name))})})}},5447:function(e,s,a){"use strict";var t=a(5893);s.Z=e=>{let{holdings:s}=e,a=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2,style:"decimal",useGrouping:!0}).format(Math.abs(e)),i=s.reduce((e,s)=>e+s.averageBuyPrice*s.quantity,0),r=s.reduce((e,s)=>e+s.lastTradedPrice*s.quantity,0),n=r-i,d=n/i*100,l=s.reduce((e,s)=>e+s.lastTradedPrice*s.quantity*s.dailyChangePercentage/100,0),c=l/r*100;return(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-4 sm:p-5",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-5",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-white/60",children:"Current Value"}),(0,t.jsxs)("div",{className:"text-lg font-medium text-white/90",children:["₹",a(r)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-white/50",children:"Invested"}),(0,t.jsxs)("span",{className:"text-xs font-medium text-white/70",children:["₹",a(i)]})]})]}),(0,t.jsx)("div",{className:"col-span-1 sm:col-span-2",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-white/60",children:"Day's P&L"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsxs)("div",{className:"text-xs sm:text-lg font-semibold ".concat(l>=0?"text-green-400/90":"text-red-400/90"),children:[l>=0?"+":"-","₹",a(l)]}),(0,t.jsxs)("div",{className:"text-xs ".concat(l>=0?"text-green-400/70":"text-red-400/70"),children:["(",c>=0?"+":"",a(c),"%)"]})]}),(0,t.jsx)("div",{className:"h-0.5 w-full bg-white/[0.03] rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full transition-all duration-500 ".concat(l>=0?"bg-green-400/30":"bg-red-400/30"),style:{width:"".concat(Math.min(Math.abs(c),100),"%")}})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-white/60",children:"Overall P&L"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsxs)("div",{className:"text-xs sm:text-lg font-semibold ".concat(n>=0?"text-green-400/90":"text-red-400/90"),children:[n>=0?"+":"-","₹",a(n)]}),(0,t.jsxs)("div",{className:"text-xs ".concat(n>=0?"text-green-400/70":"text-red-400/70"),children:["(",d>=0?"+":"",a(d),"%)"]})]}),(0,t.jsx)("div",{className:"h-0.5 w-full bg-white/[0.03] rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full transition-all duration-500 ".concat(n>=0?"bg-green-400/30":"bg-red-400/30"),style:{width:"".concat(Math.min(Math.abs(d),100),"%")}})})]})]})})]})})}},7246:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var t=a(5893),i=a(7294),r=a(1163),n=a(5447),d=a(1664),l=a.n(d),c=a(7993);let h=()=>(0,t.jsx)("div",{className:"min-h-screen bg-[#0A0A0A] text-white/90 py-6",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 space-y-6",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[1,2].map(e=>(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-3.5 animate-pulse",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"h-3 w-16 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-3 w-12 bg-white/10 rounded"})]}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("div",{className:"h-5 w-24 bg-white/10 rounded"})}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)("div",{className:"h-3 w-16 bg-white/10 rounded"})})]},e))}),(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-5 animate-pulse",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-3 w-20 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-5 w-32 bg-white/10 rounded"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-3 w-14 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-3 w-20 bg-white/10 rounded"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-3 w-20 bg-white/10 rounded"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("div",{className:"h-5 w-28 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-3 w-16 bg-white/10 rounded"})]}),(0,t.jsx)("div",{className:"h-0.5 w-full bg-white/[0.03] rounded-full",children:(0,t.jsx)("div",{className:"h-full w-1/2 bg-white/10 rounded-full"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"h-3 w-20 bg-white/10 rounded"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsx)("div",{className:"h-5 w-28 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-3 w-16 bg-white/10 rounded"})]}),(0,t.jsx)("div",{className:"h-0.5 w-full bg-white/[0.03] rounded-full",children:(0,t.jsx)("div",{className:"h-full w-1/2 bg-white/10 rounded-full"})})]})]})}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2].map(e=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-3 w-32 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"space-y-px",children:[1,2,3,4,5].map(e=>(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded border border-white/[0.06] p-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("div",{className:"h-4 w-24 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-3 w-32 bg-white/10 rounded"})]}),(0,t.jsxs)("div",{className:"text-right space-y-1",children:[(0,t.jsx)("div",{className:"h-4 w-16 bg-white/10 rounded"}),(0,t.jsx)("div",{className:"h-3 w-12 bg-white/10 rounded"})]})]})},e))})]},e))}),(0,t.jsx)("div",{className:"flex justify-center mt-7",children:(0,t.jsx)("div",{className:"h-8 w-32 bg-white/[0.03] rounded border border-white/[0.06]"})})]})});function o(){(0,r.useRouter)();let[e,s]=(0,i.useState)([]),[a,d]=(0,i.useState)({topGainers:[],topLosers:[],indices:[{name:"SENSEX",value:72500.33,change:862.02,changePercent:1.2},{name:"NIFTY 50",value:21982.8,change:235.65,changePercent:1.1}]}),[o,m]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let e=async()=>{try{var e,a;let t=await fetch("/api/stockData"),i=await t.json();s(i);let r=await fetch("https://query1.finance.yahoo.com/v1/finance/screener/predefined/saved?count=10&scrIds=day_gainers,day_losers&region=IN"),n=await r.json();(null===(e=n.finance)||void 0===e?void 0:e.result)&&d(e=>{var s,a;return{...e,topGainers:(null===(s=n.finance.result[0])||void 0===s?void 0:s.quotes)||[],topLosers:(null===(a=n.finance.result[1])||void 0===a?void 0:a.quotes)||[]}});let l=await fetch("https://query1.finance.yahoo.com/v7/finance/quote?symbols=^BSESN,^NSEI"),c=await l.json(),h=null===(a=c.quoteResponse)||void 0===a?void 0:a.result;h&&h.length>=2&&d(e=>({...e,indices:[{name:"SENSEX",value:h[0].regularMarketPrice,change:h[0].regularMarketChange,changePercent:h[0].regularMarketChangePercent},{name:"NIFTY 50",value:h[1].regularMarketPrice,change:h[1].regularMarketChange,changePercent:h[1].regularMarketChangePercent}]})),m(!1)}catch(e){console.error("Error fetching data:",e),m(!1)}};e();let a=setInterval(e,3e5);return()=>clearInterval(a)},[]),o)?(0,t.jsx)(h,{}):(0,t.jsx)("div",{className:"min-h-screen bg-[#0A0A0A] text-white/90 py-6",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto px-4 space-y-6",children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)(n.Z,{holdings:e}),(0,t.jsx)("div",{className:"flex justify-center mt-7",children:(0,t.jsx)(l(),{href:"/holdings",className:"text-xs px-4 py-2 bg-white/[0.03] hover:bg-white/[0.06] border border-white/[0.06] rounded transition-all duration-200",children:"View Holdings"})})]})})}}},function(e){e.O(0,[424,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);