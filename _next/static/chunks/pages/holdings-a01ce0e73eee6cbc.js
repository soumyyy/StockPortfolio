(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{1645:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/holdings",function(){return s(4394)}])},7993:function(e,a,s){"use strict";s.d(a,{Z:function(){return n}});var t=s(5893),i=s(7294);function n(){let[e,a]=(0,i.useState)([{name:"SENSEX",value:0,change:0,changePercent:0,isStale:!0},{name:"NIFTY 50",value:0,change:0,changePercent:0,isStale:!0}]),[s,n]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/indicesData");if(!e.ok)throw Error("Failed to fetch indices: ".concat(e.status));let s=await e.json();if(!s||!Array.isArray(s)||s.length<2)throw Error("Invalid indices data format");a([{name:"SENSEX",value:s[0].value||0,change:s[0].change||0,changePercent:s[0].changePercent||0,lastUpdate:new Date().toISOString(),isStale:!1},{name:"NIFTY 50",value:s[1].value||0,change:s[1].change||0,changePercent:s[1].changePercent||0,lastUpdate:new Date().toISOString(),isStale:!1}]),n(!1)}catch(e){console.error("Error fetching indices data:",e),n(!0),a(e=>e.map(e=>({...e,isStale:!0,lastUpdate:new Date().toISOString()})))}};e();let s=setInterval(e,3e5);return()=>clearInterval(s)},[]);let r=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2,style:"decimal",useGrouping:!0}).format(Math.abs(e));return(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.map(e=>(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"text-xs text-white/50",children:e.name}),e.isStale&&(0,t.jsx)("div",{className:"text-[10px] text-white/30",children:"Stale"})]}),(0,t.jsx)("div",{className:"mt-1 text-base",children:r(e.value)}),(0,t.jsxs)("div",{className:"mt-0.5 text-xs ".concat(e.change>=0?"text-green-500":"text-red-500"),children:[e.change>=0?"+":"",r(e.change)," (",e.changePercent.toFixed(2),"%)"]})]},e.name))})})}},5447:function(e,a,s){"use strict";var t=s(5893);a.Z=e=>{let{holdings:a}=e,s=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2,style:"decimal",useGrouping:!0}).format(Math.abs(e)),i=a.reduce((e,a)=>e+a.averageBuyPrice*a.quantity,0),n=a.reduce((e,a)=>e+a.lastTradedPrice*a.quantity,0),r=n-i,c=r/i*100,d=a.reduce((e,a)=>e+a.lastTradedPrice*a.quantity*a.dailyChangePercentage/100,0),l=d/n*100;return(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-4 sm:p-5",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-5",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-white/60",children:"Current Value"}),(0,t.jsxs)("div",{className:"text-lg font-medium text-white/90",children:["₹",s(n)]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-white/50",children:"Invested"}),(0,t.jsxs)("span",{className:"text-xs font-medium text-white/70",children:["₹",s(i)]})]})]}),(0,t.jsx)("div",{className:"col-span-1 sm:col-span-2",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-white/60",children:"Day's P&L"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsxs)("div",{className:"text-xs sm:text-lg font-semibold ".concat(d>=0?"text-green-400/90":"text-red-400/90"),children:[d>=0?"+":"-","₹",s(d)]}),(0,t.jsxs)("div",{className:"text-xs ".concat(d>=0?"text-green-400/70":"text-red-400/70"),children:["(",l>=0?"+":"",s(l),"%)"]})]}),(0,t.jsx)("div",{className:"h-0.5 w-full bg-white/[0.03] rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full transition-all duration-500 ".concat(d>=0?"bg-green-400/30":"bg-red-400/30"),style:{width:"".concat(Math.min(Math.abs(l),100),"%")}})})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-white/60",children:"Overall P&L"}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsxs)("div",{className:"text-xs sm:text-lg font-semibold ".concat(r>=0?"text-green-400/90":"text-red-400/90"),children:[r>=0?"+":"-","₹",s(r)]}),(0,t.jsxs)("div",{className:"text-xs ".concat(r>=0?"text-green-400/70":"text-red-400/70"),children:["(",c>=0?"+":"",s(c),"%)"]})]}),(0,t.jsx)("div",{className:"h-0.5 w-full bg-white/[0.03] rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full transition-all duration-500 ".concat(r>=0?"bg-green-400/30":"bg-red-400/30"),style:{width:"".concat(Math.min(Math.abs(c),100),"%")}})})]})]})})]})})}},4394:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return l}});var t=s(5893),i=s(7294);function n(e){let{stock:a}=e,s=a.unrealizedPLPercentage>0,i=a.dailyChangePercentage>0,n=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2}).format(Math.abs(e));return(0,t.jsx)("div",{className:"p-3 hover:bg-white/[0.01] transition-all duration-200 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"space-y-1.5",children:[(0,t.jsx)("div",{className:"flex items-center justify-between text-[11px] text-white/50",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("span",{className:"mr-2",children:["Qty: ",n(a.quantity)]}),(0,t.jsxs)("span",{children:["Avg: ₹",n(a.averageBuyPrice)]})]})}),(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("h3",{className:"text-sm font-medium text-white/90",children:a.ticker})}),(0,t.jsx)("div",{className:"text-[11px] text-white/50 font-normal",children:a.name})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm font-medium ".concat(s?"text-green-400/90":"text-red-400/90"),children:[s?"+":"","₹",n(a.unrealizedPL)]}),(0,t.jsxs)("div",{className:"text-[11px] ".concat(s?"text-green-400/70":"text-red-400/70"),children:[s?"+":"",n(a.unrealizedPLPercentage),"%"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-[11px]",children:[(0,t.jsxs)("div",{className:"text-white/50",children:["Invested: ₹",n(a.quantity*a.averageBuyPrice)]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("span",{className:"mr-2 text-white/50",children:["LTP: ₹",n(a.lastTradedPrice)]}),(0,t.jsxs)("span",{className:"".concat(i?"text-green-400/80":"text-red-400/80"),children:[i?"+":"",n(a.dailyChangePercentage),"%"]})]})]})]})})}var r=s(5447),c=s(7993);function d(){return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-5",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-7 w-32 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-28 bg-white/[0.06] rounded animate-pulse"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-7 w-32 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-28 bg-white/[0.06] rounded animate-pulse"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-7 w-32 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-28 bg-white/[0.06] rounded animate-pulse"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"})}),(0,t.jsx)("div",{className:"space-y-1",children:[void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"bg-white/[0.03] rounded border border-white/[0.06] p-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"h-4 w-20 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-16 bg-white/[0.06] rounded animate-pulse"})]}),(0,t.jsxs)("div",{className:"mt-0.5 flex items-baseline gap-1",children:[(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-16 bg-white/[0.06] rounded animate-pulse"})]})]},a))})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-2",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"})}),(0,t.jsx)("div",{className:"space-y-1",children:[void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"bg-white/[0.03] rounded border border-white/[0.06] p-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"h-4 w-20 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-16 bg-white/[0.06] rounded animate-pulse"})]}),(0,t.jsxs)("div",{className:"mt-0.5 flex items-baseline gap-1",children:[(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-16 bg-white/[0.06] rounded animate-pulse"})]})]},a))})]})})]}),(0,t.jsx)("div",{className:"backdrop-blur-md bg-white/[0.03] rounded-lg border border-white/[0.06] p-4",children:(0,t.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"bg-white/[0.03] rounded border border-white/[0.06] p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"h-4 w-32 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-24 bg-white/[0.06] rounded animate-pulse"})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("div",{className:"h-4 w-28 bg-white/[0.06] rounded animate-pulse"}),(0,t.jsx)("div",{className:"h-4 w-20 bg-white/[0.06] rounded animate-pulse"})]})]},a))})})]})}function l(){let[e,a]=(0,i.useState)([]),[s,l]=(0,i.useState)({key:"unrealizedPL",direction:"desc"}),[h,m]=(0,i.useState)([{name:"SENSEX",value:0,change:0,changePercent:0,isStale:!0},{name:"NIFTY 50",value:0,change:0,changePercent:0,isStale:!0}]),[o,x]=(0,i.useState)(!0),[u,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/indicesData");if(!e.ok)throw Error("Failed to fetch indices: ".concat(e.status));let a=await e.json();if(!a||!Array.isArray(a)||a.length<2)throw Error("Invalid indices data format");m([{name:"SENSEX",value:a[0].value||0,change:a[0].change||0,changePercent:a[0].changePercent||0,lastUpdate:new Date().toISOString(),isStale:!1},{name:"NIFTY 50",value:a[1].value||0,change:a[1].change||0,changePercent:a[1].changePercent||0,lastUpdate:new Date().toISOString(),isStale:!1}]),g(!1)}catch(e){console.error("Error fetching indices data:",e),g(!0),m(e=>e.map(e=>({...e,isStale:!0,lastUpdate:new Date().toISOString()})))}},s=async()=>{try{let e=await fetch("/api/stockData"),s=await e.json();a(s),x(!1)}catch(e){console.error("Error fetching holdings data:",e),x(!1)}};e(),s();let t=setInterval(e,6e4),i=setInterval(s,3e5);return()=>{clearInterval(t),clearInterval(i)}},[]);let v=[...e].sort((e,a)=>{switch(s.key){case"unrealizedPL":return"asc"===s.direction?e.unrealizedPL-a.unrealizedPL:a.unrealizedPL-e.unrealizedPL;case"dailyChangePercentage":return"asc"===s.direction?e.dailyChangePercentage-a.dailyChangePercentage:a.dailyChangePercentage-e.dailyChangePercentage;case"alphabetical":return"asc"===s.direction?e.ticker.localeCompare(a.ticker):a.ticker.localeCompare(e.ticker);default:return 0}});return e.filter(e=>e.unrealizedPLPercentage>0).length,e.filter(e=>e.unrealizedPLPercentage<0).length,[...e].sort((e,a)=>a.unrealizedPLPercentage-e.unrealizedPLPercentage)[0],[...e].sort((e,a)=>e.unrealizedPLPercentage-a.unrealizedPLPercentage)[0],(0,t.jsx)("div",{className:"min-h-screen bg-[#0A0A0A] p-4 text-sm",children:(0,t.jsx)("div",{className:"max-w-5xl mx-auto space-y-4",children:o?(0,t.jsx)(d,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{}),(0,t.jsx)(r.Z,{holdings:e}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xs font-medium text-white/60",children:"Holdings"}),(0,t.jsxs)("div",{className:"flex rounded-md overflow-hidden border border-white/[0.06]",children:[(0,t.jsx)("button",{onClick:()=>l({key:"alphabetical",direction:"asc"===s.direction?"desc":"asc"}),className:"px-3 py-1.5 text-[11px] transition-all ".concat("alphabetical"===s.key?"bg-white/[0.06] text-white/90":"text-white/50 hover:bg-white/[0.03]"),children:"A-Z"}),(0,t.jsx)("button",{onClick:()=>l({key:"unrealizedPL",direction:"asc"===s.direction?"desc":"asc"}),className:"px-3 py-1.5 text-[11px] border-l border-white/[0.06] transition-all ".concat("unrealizedPL"===s.key?"bg-white/[0.06] text-white/90":"text-white/50 hover:bg-white/[0.03]"),children:"P&L"}),(0,t.jsx)("button",{onClick:()=>l({key:"dailyChangePercentage",direction:"asc"===s.direction?"desc":"asc"}),className:"px-3 py-1.5 text-[11px] border-l border-white/[0.06] transition-all ".concat("dailyChangePercentage"===s.key?"bg-white/[0.06] text-white/90":"text-white/50 hover:bg-white/[0.03]"),children:"Daily %"})]})]}),(0,t.jsx)("div",{className:"divide-y divide-white/[0.08]",children:v.map(e=>(0,t.jsx)(n,{stock:e},e.ticker))})]})]})})})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=1645)}),_N_E=e.O()}]);